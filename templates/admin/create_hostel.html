<!DOCTYPE html>
<html>
<head>
    <title>Hostels</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
</head>
<body>

<div class="container">

<h2>Create New Hostel</h2>

{% with messages = get_flashed_messages() %}
{% if messages %}
<p class="flash">{{ messages[0] }}</p>
{% endif %}
{% endwith %}

<form id="createHostelForm" method="POST">
    <input type="text" name="name" placeholder="Hostel Name" required>
    <select name="gender" required>
        <option value="">Select Gender</option>
        <option value="male">Male</option>
        <option value="female">Female</option>
        <option value="mixed">Mixed</option>
    </select>
    <input type="text" name="faculty" placeholder="Faculty (optional)">
    <button type="submit">Create Hostel</button>
</form>

<hr>

<h2>Existing Hostels</h2>
<table>
<tr>
<th>Name</th>
<th>Gender</th>
<th>Faculty</th>
<th>Free Bunks</th>
<th>Actions</th>
</tr>
{% for hostel in hostels %}
<tr>
<td>{{ hostel.name }}</td>
<td>{{ hostel.gender | capitalize }}</td>
<td>{{ hostel.faculty or 'All' }}</td>
<td>{{ hostel.free_bunks }}</td>
<td>
    <a href="{{ url_for('hostel.manage_hostel', hostel_id=hostel.id) }}">
        <button>Manage</button>
    </a>
</td>
</tr>
{% endfor %}
</table>

<script>
document.getElementById("createHostelForm").addEventListener("submit", function(e){
    let name = this.name.value.trim();
    let gender = this.gender.value;
    if(!name || !gender){
        alert("Please fill in hostel name and gender");
        e.preventDefault();
    }
});
</script>

</div>
</body>
</html>
